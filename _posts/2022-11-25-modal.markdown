---
layout: post
title: "ğŸ‘› Modal Component"
date: 2022-11-25
tags: [frontend-study]
---

## ğŸ§¥ Summary

Nextjsì—ì„œ Modal ì²˜ë¦¬ì— ëŒ€í•´ ì•Œì•„ë³´ê³ , ë‚˜ë§Œì˜ ì»¤ìŠ¤í…€ ëª¨ë‹¬ íŒì—…ì„ ì ìš©í•´ë³´ì.

### ğŸ¥½ TODO LIST <br/>

(1) \_document.tsx ì»´í¬ë„ŒíŠ¸ì— <div> íƒœê·¸ ì¶”ê°€. <br/>
(2) Modal ì»´í¬ë„ŒíŠ¸ ìƒì„±. <br/>
(3) ì»¨í…ì¸  ì»´í¬ë„ŒíŠ¸ ìƒì„±. <br/>
(4) Modal ì»´í¬ë„ŒíŠ¸ì— ì»¨í…ì¸ ë¥¼ ë‹´ì•„ì„œ Modal ì»´í¬ë„ŒíŠ¸ í˜¸ì¶œ.

<br/>

### ğŸ‘• 1. \_document.tsx ì»´í¬ë„ŒíŠ¸ì— <div> íƒœê·¸ ì¶”ê°€.

- \_document.tsx ì»´í¬ë„ŒíŠ¸ HTML ë§ˆí¬ì—… êµ¬ì¡° ë‚´ <div id="_modal"></div>ë¥¼ ì¶”ê°€.

```tsx
// _document.tsx
...
<body>
  ...
  <div id="_modal"></div>
  ...
</body>
...
```

<br/>

### ğŸ©³ 2. Modal ì»´í¬ë„ŒíŠ¸ ìƒì„±.

- ReactDOM.createPortal í•¨ìˆ˜ë¥¼ í†µí•´ \_document.tsxì— ë§Œë“¤ì–´ë†“ì€ modalì— ì§€ì •í•œ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§ ì‹œí‚´.
- createPortalì€ ë¶€ëª¨ êµ¬ì„± ìš”ì†Œì˜ DOM ê³„ì¸µ ì™¸ë¶€ì— ìˆëŠ” DOM ë…¸ë“œë¡œ ìì‹ì„ ë Œë”ë§í•˜ëŠ” ìµœìƒì˜ ë°©ë²•ì„ ì œê³µí•¨. [(ì¶œì²˜ : React Docs)](https://reactjs.org/docs/portals.html){:target="\_blank"}

```tsx
// modal/index.tsx
// createPortalì„ í™œìš©í•œ Modal Component.
import ReactDOM from "react-dom";
import { PropsWithChildren } from "react";
import { ModalTemplate, ModalBackground, ModalInner } from "./style";
interface ModalProps {
  onClose: () => void;
}
const ModalBgDimed = (props: ModalProps) => {
  return <ModalBackground onClick={props.onClose} />;
};
const ModalContents = ({ children }: PropsWithChildren) => {
  return <ModalInner>{children}</ModalInner>;
};
const Modal = (props: PropsWithChildren<ModalProps>) => {
  const modalElement = document.getElementById("_modal");
  if (modalElement === null) {
    return <div></div>;
  } else {
    return (
      <>
        {ReactDOM.createPortal(
          <>
            <ModalTemplate>
              <ModalContents>{props.children}</ModalContents>
              <ModalBgDimed onClose={props.onClose}></ModalBgDimed>
            </ModalTemplate>
          </>,
          modalElement
        )}
      </>
    );
  }
};
export default Modal;
```

<br/>

### ğŸ‘” 3. ì»¨í…ì¸  ì»´í¬ë„ŒíŠ¸ ìƒì„±.

- Modalì„ ì¢…ë£Œì‹œí‚¬ onCloseë¥¼ Propsë¡œ ê°–ëŠ” ë¶€ë¶„ ì™¸ ê¸°ì¡´ ì»´í¬ë„ŒíŠ¸ êµ¬ì„±ê³¼ ë™ì¼í•˜ê²Œ ìƒì„±.

```tsx
// Modal Contents Component.
interface ModalProps {
  onClose: () => void;
}
const ModalContents = (props: ModalProps) => {
...
}

```

<br/>

### ğŸ¦Š 4. Modal ì»´í¬ë„ŒíŠ¸ì— ì»¨í…ì¸ ë¥¼ ë‹´ì•„ì„œ Modal ì»´í¬ë„ŒíŠ¸ í˜¸ì¶œ.

- í˜ì´ì§€ ë‚´ useStateë¡œ Modal ë…¸ì¶œ ìœ ë¬´ë¥¼ ì œì–´í•˜ê³ , í•„ìš”í•œ ì´ë²¤íŠ¸ì— Modalì„ í˜¸ì¶œí•˜ì—¬ ì‚¬ìš©í•œë‹¤.
- Modal ì»´í¬ë„ŒíŠ¸ì—ëŠ” Modal Componentsì— close ì²˜ë¦¬í•  í•¨ìˆ˜ë¥¼ propsë¡œ ì „ë‹¬í•´ì•¼í•¨.

```tsx
...
const [modalAddAccountItem, setModalAddAccountItem] = useState(false);
const addAccountItem = () => {
  setModalAddAccountItem(true);
};
const handleModalClose = () => {
  setModalAddAccountItem(false);
};
...
<FixedButton onClick={() => addAccountItem()}>ì‘ì„±í•˜ê¸°</FixedButton>
{modalAddAccountItem && <ModalItemAdd onClose={handleModalClose} />}
...
```

<br/>

---

<br/>

## ğŸ« ì°¸ê³  í˜ì´ì§€

- [https://velog.io/@kkojae91/PropsWithChildren%EB%8A%94-%EC%95%88%EC%A0%84%ED%95%9C-%ED%83%80%EC%9E%85%EC%9D%BC%EA%B9%8C](https://velog.io/@kkojae91/PropsWithChildren%EB%8A%94-%EC%95%88%EC%A0%84%ED%95%9C-%ED%83%80%EC%9E%85%EC%9D%BC%EA%B9%8C){:target="\_blank"}
- [https://velog.io/@choiminwoo2/Next.js%EC%97%90%EC%84%9C-React-portal-%EC%82%AC%EC%9A%A9](https://velog.io/@choiminwoo2/Next.js%EC%97%90%EC%84%9C-React-portal-%EC%82%AC%EC%9A%A9){:target="\_blank"}
- [https://reactjs.org/docs/portals.html](https://reactjs.org/docs/portals.html){:target="\_blank"}
  <br/><br/>

---
