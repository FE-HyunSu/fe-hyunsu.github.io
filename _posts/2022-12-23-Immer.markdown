---
layout: post
title: "ğŸš ë¶ˆë³€ì„± ìœ ì§€(Immer)"
date: 2022-12-23
tags: [frontend-study]
---

## Immerë¥¼ í™œìš©í•˜ì—¬ ì‰¬ìš´ ë¶ˆë³€ì„± ìœ ì§€.

- ë°°ì—´ì´ë‚˜ ê°ì²´ë¥¼ ì—…ë°ì´íŠ¸ í•´ì•¼ í•  ë•Œì—ëŠ” ì§ì ‘ ìˆ˜ì • í•˜ì§€ ì•Šê³  ë¶ˆë³€ì„±ì„ ìœ ì§€í•˜ë©´ì„œ ì—…ë°ì´íŠ¸ë¥¼ í•´ì•¼í•¨.
- ë³´í†µ ìŠ¤í”„ë ˆë“œ ì—°ì‚°ìë¥¼ í™œìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸ ì²˜ë¦¬í•œë‹¤.
- immerë¥¼ í™œìš©í•˜ì—¬ ì‰¬ìš´ ë¶ˆë³€ì„± ìœ ì§€í•´ë³´ì.

```tsx
$ npm install immer
```

- produce(state, draft) í˜•íƒœë¡œ ì‚¬ìš©í•œë‹¤.

```tsx
import produce from "immer";

const state = {
  number: 1,
  contents: 2,
};

const stateUpdate = produce(state, (draft) => {
  draft.number += 1;
});

console.log(stateUpdate);
// result : { number: 2, contents: 2 }
```

- Reducer ì—ì„œ ì‚¬ìš© ì‚¬ë¡€.

```tsx
...
function reducer(state, action) {
  switch (action.type) {
    case "TEST_USER1":
      return produce(state, (draft) => {
        draft.users.push(action.user);
      });
    case "TEST_USER2":
      return produce(state, (draft) => {
        const user = draft.users.find((user) => user.id === action.id);
        user.active = !user.active;
      });
    case "TEST_USER3":
      return produce(state, (draft) => {
        const index = draft.users.findIndex((user) => user.id === action.id);
        draft.users.splice(index, 1);
      });
    default:
      return state;
  }
}
...
```

<br/>

---

<br/>

## ğŸ« ì°¸ê³  í˜ì´ì§€

- [https://react.vlpt.us/basic/23-immer.html](https://react.vlpt.us/basic/23-immer.html){:target="\_blank"}
  <br/><br/>

---
